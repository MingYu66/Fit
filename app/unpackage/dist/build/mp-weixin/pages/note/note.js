(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/note/note"],{"0fbf":function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("c84b"),n("a9ff");o(n("66fd"));var a=o(n("adf0"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"150b":function(t,e,n){"use strict";n.r(e);var o=n("3140"),a=n.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e["default"]=a.a},"1c77b":function(t,e,n){"use strict";var o=n("a47d"),a=n.n(o);a.a},3140:function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("2eee")),c=o(n("c973")),r=n("f104"),i={data:function(){return{placeholder:"开始记录...",editorCtx:null,emojis:[{code:"smile",path:"&#xe662;"},{code:"neutral",path:"&#xe7a0;"},{code:"sad",path:"&#xe607;"}],navCurrent:0,formData:{title:"",content:"",timestamp:null,emoji:"开心"},currentTime:new Date}},onLoad:function(e){var n=this;console.log(e);var o=this;e.id&&t.gRequest.post("bohe/getNote",{data:{id:e.id}},(function(e){console.log(e),n.formData=e.data.data,n.editorCtx.setContents(n.formData.content),"开心"===n.formData.emoji?n.navCurrent=0:"一般"===n.formData.emoji?n.navCurrent=1:n.navCurrent=2,console.log(n.navCurrent),t.createSelectorQuery().select("#editor").context((function(t){o.editorCtx=t.context})).exec(),o.editorCtx.setContents({html:e.data.data.content,success:function(t){console.log(t,"res")},fail:function(t){console.log(t,"err")}})}))},methods:{formatTimestamp:function(t){var e=function(t){return t.toString().padStart(2,"0")};return"".concat(t.getFullYear(),"/").concat(e(t.getMonth()+1),"/").concat(e(t.getDate())," ").concat(e(t.getHours()),":").concat(e(t.getMinutes()))},onEditorReady:function(){var e=this;t.createSelectorQuery().select("#editor").context((function(t){e.editorCtx=t.context})).exec()},insertPhoto:function(){var e=this;return(0,c.default)(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.chooseImage({count:1,sourceType:["camera"],sizeType:["compressed"]});case 3:o=n.sent,console.log(o[1]),o[1].tempFilePaths.length&&t.uploadFile({url:"http://127.0.0.1:8081/common/upload",filePath:o[1].tempFilePaths[0],name:"file",success:function(t){console.log(t);var n=JSON.parse(t.data);console.log(n),console.log(n.url),e.editorCtx.insertImage({src:n.url,width:"80%",success:function(){return console.log("图片插入成功")}})}}),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log(n.t0),t.showToast({title:"拍照失败",icon:"none"});case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},insertEmoji:function(t,e){this.navCurrent=t,this.formData.emoji=e},saveContent:function(){var e=this;this.editorCtx.getContents({success:function(n){var o=e.formData.title,a=n.html,c={id:e.formData.id,title:o,content:a,emoji:e.formData.emoji,userId:r.getStorage("id")};console.log("保存内容:",c),c.id?t.gRequest.post("bohe/editNote",{data:c},(function(t){console.log(t)})):t.gRequest.post("bohe/addNote",{data:c},(function(t){console.log(t)})),t.showToast({title:"保存成功"}),t.navigateBack()},fail:function(e){t.showToast({title:"保存失败",icon:"none"})}})},statusChange:function(t){console.log("工具栏状态:",t.detail)},goBack:function(){t.navigateBack()}}};e.default=i}).call(this,n("543d")["default"])},a47d:function(t,e,n){},adf0:function(t,e,n){"use strict";n.r(e);var o=n("edcc"),a=n("150b");for(var c in a)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(c);n("1c77b");var r=n("f0c5"),i=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=i.exports},edcc:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o}));var o={guiPage:function(){return n.e("GraceUI5/components/gui-page").then(n.bind(null,"674e"))},guiHeaderLeading:function(){return n.e("GraceUI5/components/gui-header-leading").then(n.bind(null,"589f"))}},a=function(){var t=this.$createElement,e=(this._self._c,null==this.formData.id?this.formatTimestamp(this.currentTime):null);this.$mp.data=Object.assign({},{$root:{m0:e}})},c=[]}},[["0fbf","common/runtime","common/vendor"]]]);